{% extends "base.html" %}
{% block page_title %}Project Dashboard{% endblock %}

{% block content %}
<div>
<div class="dropdown">
  <a href="/activitydb/projectproposal_add" class="btn btn-large btn-success">New Project Proposal</a>
  <a href="/activitydb/projectproposal_import" class="btn btn-large btn-info">Import Project Proposal</a>
</div>
</div>
<br/>
<div>
<ol class="breadcrumb">
  <li><a href="/activitydb/dashboard/0/">Program Dashboards</a></li>
  <li><a href="/activitydb/projectproposal_list/{{ getProgram.id }}">Proposal</a></li>
  <li class="active">Project Dashboard</li>
</ol>
</div>
<ul class="list-group">
<h3>{{getProgram.gaitid }} - {{ getProgram.name }}</h3>
{% for proposal in getDashboard %}
    <div class="jumbotron">
    <ul class="list-group">
        <li class="list-group-item list-group-item-info">
            <h4>Project Proposal</h4>
        </li>

        <li class="list-group-item"><b>{{ proposal.project_proposal.create_date|date }} - {{ proposal.project_proposal.project_title }} {{ proposal.project_proposal.acivity_code }}</b></li>
        <li class="list-group-item">
            <div class="btn-group" role="group" aria-label="...">

                {% if proposal.project_proposal.approval %}
                    <button data-toggle="tooltip" data-placement="top" title="Proposal has been Approved, it is no longer editable" type="button" class="btn btn-sm btn-frozen">Update Proposal</button>
                    <button data-toggle="tooltip" data-placement="top" title="Proposal has been Approved, it is no longer editable" type="button" class="btn btn-sm btn-frozen">Delete Proposal</button>
                    <button type="button" class="btn btn-sm btn-info" onclick="location.href='/activitydb/projectagreement_add/{{ proposal.project_proposal.id }}'">Create an Agreement</button>
                {% else %}
                    <button type="button" class="btn btn-sm btn-warning" onclick="location.href='/activitydb/projectproposal_update/{{ proposal.project_proposal.id }}'">Update Proposal</button>
                    <button type="button" class="btn btn-sm btn-danger" onclick="location.href='/activitydb/projectproposal_delete/{{ proposal.project_proposal.id }}'">Delete Proposal</button>
                    <button data-toggle="tooltip" data-placement="top" title="Once Approved you will be able to click here and create a project agreement" type="button" class="btn btn-sm btn-frozen">Create an Agreement</button>
                {% endif %}
            </div>
        </li>
        <li class="list-group-item">
            {% if proposal.project_proposal.approval %}
                <button class="btn btn-success" type="button">
                  Approved
                </button>
            {% else %}
                <button class="btn btn-primary" type="button" onclick="location.href='/activitydb/projectproposal_update/{{ proposal.project_proposal.id }}'">
                  Waiting for Approval
                </button>
            {% endif %}
         </li>

    </ul>
    {% if proposal.project_agreement %}
        <ul class="list-group">
            <li class="list-group-item list-group-item-info">
                <h4>Project Agreement</h4>
            </li>

            <li class="list-group-item"><b>{{ proposal.project_agreement.create_date|date }} - {{ proposal.project_agreement.project_title }} {{ proposal.project_agreement.acivity_code }}</b></li>
            <li class="list-group-item">
                <div class="btn-group" role="group" aria-label="...">

                    {% if proposal.project_agreement.approval %}
                        <button data-toggle="tooltip" data-placement="top" title="Agreement has been Approved, it is no longer editable" type="button" class="btn btn-sm btn-frozen">Update Agreement</button>
                        <button data-toggle="tooltip" data-placement="top" title="Agreement has been Approved, it is no longer editable" type="button" class="btn btn-sm btn-frozen">Delete Agreement</button>
                        <button type="button" class="btn btn-sm btn-info" onclick="location.href='/activitydb/projectcomplete_add/{{ proposal.project_agreement.id }}'">Complete Project</button>
                    {% else %}
                        <button type="button" class="btn btn-sm btn-warning" onclick="location.href='/activitydb/projectagreement_update/{{ proposal.project_agreement.id }}'">Update Agreement</button>
                        <button type="button" class="btn btn-sm btn-danger" onclick="location.href='/activitydb/projectagreement_delete/{{ proposal.project_agreement.id }}'">Delete Agreement</button>
                        <button data-toggle="tooltip" data-placement="top" title="Once Approved you will be able to click here and complete the project" type="button" class="btn btn-sm btn-frozen">Complete Project</button>
                    {% endif %}


                </div>
            </li>
            <li class="list-group-item">
                {% if proposal.project_agreement.approval %}
                    <button class="btn btn-success" type="button">
                      Approved
                    </button>
                {% else %}
                    <button class="btn btn-primary" type="button" onclick="location.href='/activitydb/projectagreement_update/{{ proposal.project_agreement.id }}'">
                      Waiting for Approval
                    </button>
                {% endif %}
             </li>
        </ul>
    {% endif %}

    {% if proposal.project_completion %}
        <h4>Project Completion</h4>
        <ul class="list-group">
            <li class="list-group-item list-group-item-info">
                <h4>Project Completion</h4>
            </li>

            <li class="list-group-item"><b>{{ proposal.project_completion.create_date|date }} - {{ proposal.project_completion.project_title }} {{ proposal.project_completion.acivity_code }}</b></li>
            <li class="list-group-item">
                <div class="btn-group" role="group" aria-label="...">
                    <button type="button" class="btn btn-sm btn-warning" onclick="location.href='/activitydb/projectcomplete_update/{{ proposal.project_completion.id }}'">Update Completion</button>
                    <button type="button" class="btn btn-sm btn-danger" onclick="location.href='/activitydb/projectacomplete_delete/{{ proposal.project_completion.id }}'">Delete Completion</button>
                </div>
            </li>
            <li class="list-group-item">
                {% if proposal.project_complete.approval %}
                    <button class="btn btn-success" type="button">
                      Approved
                    </button>
                {% else %}
                    <button class="btn btn-primary" type="button" onclick="location.href='/activitydb/projectcomplete_update/{{ proposal.project_completion.id }}'">
                      Open
                    </button>
                {% endif %}
             </li>
        </ul>
    {% endif %}
    <button class="btn btn-primary" type="button" onclick="location.href='/activitydb/documentation_list/{{ proposal.project_proposal.id }}'">
        Documentation <span class="badge">{{ getDocumentCount }}</span>
    </button>
    <button class="btn btn-primary" type="button" onclick="location.href='/activitydb/community_list/{{ proposal.project_proposal.id }}'">
        Communities <span class="badge">{{ getCommunityCount }}</span>
    </button>
    </div>
{% empty %}
    <li class="list-group-item">No proposals yet.</li>
    </div>
{% endfor %}
</ul>
{% endblock content %}