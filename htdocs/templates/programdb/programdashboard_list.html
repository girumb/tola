{% extends "base.html" %}
{% block page_title %}Program Dashboard{% endblock %}

{% block content %}

{% regroup getPrograms by gaitid as programs_by_gaitid %}
<ul class="list-group">
{% for item in programs_by_gaitid %}
    <div class="jumbotron">
        <h3>{{ item.grouper }} - {{ item.list.0.name }}</h3>
        {% regroup item.list by proposal__id as proposal_list %}
        <button class="btn btn-success" type="button" onclick="location.href='/programdb/dashboard/project/{{ item.list.0.id }}'">Project Proposal <span class="badge">{{ proposal_list | length }} </span></button>
        {% regroup item.list by agreement__id as agreement_list %}
        <button class="btn btn-info" type="button" onclick="location.href='/programdb/dashboard/project/{{ item.list.0.id }}'">Project Agreement <span class="badge">{{ agreement_list | length }}</span></button>
        {% regroup item.list by complete__id as complete__id %}
        <button class="btn btn-warning" type="button" onclick="location.href='/programdb/dashboard/project/{{ item.list.0.id }}'">Project Complete <span class="badge">{{ complete__id |length }}</span></button>
    </div>
{% empty %}
    <li class="list-group-item">No proposals yet.</li>
{% endfor %}
</ul>
{% endblock content %}